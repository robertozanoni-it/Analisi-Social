<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategist Social Intelligence Hub - Deep Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Outfit:wght@400;700;900&display=swap');
        
        :root {
            --accent: #8b5cf6;
            --secondary: #ec4899;
            --bg: #050505;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg); 
            color: #ffffff; 
            font-size: 16px;
        }
        h1, h2, h3, .font-outfit { font-family: 'Outfit', sans-serif; }

        .glass { background: rgba(20, 20, 20, 0.8); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.08); }
        .gradient-text { background: linear-gradient(to right, #a78bfa, #f472b6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .score-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .score-card:hover { transform: translateY(-5px); border-color: var(--accent); background: rgba(139, 92, 246, 0.05); }

        .analysis-tab { display: none; }
        .analysis-tab.active { display: block; animation: fadeIn 0.5s ease-out; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .loader { width: 40px; height: 40px; border: 3px solid rgba(139, 92, 246, 0.2); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        #heatmapCanvas { pointer-events: none; mix-blend-mode: screen; opacity: 0.6; }
        
        /* Typography Scale Up */
        .text-analysis-main { font-size: 1.15rem; line-height: 1.75; }
        .text-suggestion-label { font-size: 0.75rem; font-weight: 800; letter-spacing: 0.1em; }
        .text-suggestion-content { font-size: 1rem; line-height: 1.5; }
        .text-pillar-title { font-size: 1.75rem; font-weight: 900; }
        
        .action-item { background: rgba(255,255,255,0.03); border-radius: 1rem; padding: 1rem; border-left: 4px solid var(--accent); }
    </style>
</head>
<body class="antialiased">

    <header class="sticky top-0 z-50 glass border-b border-white/5 px-6 py-4 no-print">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-purple-600 to-pink-500 flex items-center justify-center">
                    <i class="fas fa-brain text-white"></i>
                </div>
                <div>
                    <h1 class="text-xl font-black uppercase tracking-tighter">Social<span class="text-purple-400">Strategist</span></h1>
                    <p class="text-[10px] font-bold text-white/40 tracking-[0.2em]">AUDIT & CONVERSION ENGINE</p>
                </div>
            </div>
            
            <div class="flex items-center gap-4" id="navActions" style="display: none;">
                <button onclick="location.reload()" class="text-xs font-black uppercase tracking-widest text-white/50 hover:text-white transition">Nuovo Test</button>
                <button onclick="window.print()" class="bg-white text-black px-6 py-2.5 rounded-full text-xs font-black uppercase tracking-widest hover:bg-purple-500 hover:text-white transition shadow-xl shadow-purple-500/10">Esporta Report</button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12">
        
        <!-- Upload Section -->
        <section id="welcome" class="py-12 text-center">
            <h2 class="text-5xl md:text-7xl font-black mb-6 font-outfit leading-none">Ottimizza la <br><span class="gradient-text">Conversione Visiva.</span></h2>
            <p class="text-white/50 mb-12 max-w-2xl mx-auto text-lg leading-relaxed">Carica un post o una landing page. Ti dirò cosa vede l'utente nei primi 3 secondi e come migliorare il copy per vendere di più.</p>
            
            <div id="dropZone" class="max-w-2xl mx-auto glass rounded-[3rem] p-16 border-2 border-dashed border-white/10 hover:border-purple-500/50 transition-all cursor-pointer group">
                <input type="file" id="fileInput" class="hidden" accept="image/*">
                <div class="w-20 h-20 rounded-full bg-purple-500/10 flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition">
                    <i class="fas fa-file-image text-4xl text-purple-400"></i>
                </div>
                <p class="text-2xl font-bold">Trascina l'immagine qui</p>
                <p class="text-xs text-white/30 uppercase mt-3 tracking-widest font-bold">Analisi per Instagram, LinkedIn, TikTok e Web</p>
            </div>
        </section>

        <!-- Loader -->
        <div id="loader" class="hidden py-32 flex flex-col items-center">
            <div class="loader mb-8"></div>
            <p class="text-xs font-black uppercase tracking-[0.4em] text-purple-400 animate-pulse">Analisi neurale in corso...</p>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="hidden space-y-12">
            
            <!-- 5 Pillar Scores -->
            <div class="grid grid-cols-2 md:grid-cols-5 gap-6">
                <div class="glass p-6 rounded-[2rem] score-card cursor-pointer border-b-8 border-purple-500 active-card" onclick="showPillar('visual-flow')">
                    <p class="text-[10px] font-black text-white/40 uppercase mb-3 tracking-widest">Flusso Visivo</p>
                    <p id="score-flow" class="text-4xl font-black font-outfit">--</p>
                </div>
                <div class="glass p-6 rounded-[2rem] score-card cursor-pointer border-b-8 border-pink-500" onclick="showPillar('contrast')">
                    <p class="text-[10px] font-black text-white/40 uppercase mb-3 tracking-widest">Contrasto</p>
                    <p id="score-contrast" class="text-4xl font-black font-outfit">--</p>
                </div>
                <div class="glass p-6 rounded-[2rem] score-card cursor-pointer border-b-8 border-blue-500" onclick="showPillar('accessibility')">
                    <p class="text-[10px] font-black text-white/40 uppercase mb-3 tracking-widest">Leggibilità</p>
                    <p id="score-access" class="text-4xl font-black font-outfit">--</p>
                </div>
                <div class="glass p-6 rounded-[2rem] score-card cursor-pointer border-b-8 border-amber-500" onclick="showPillar('structure')">
                    <p class="text-[10px] font-black text-white/40 uppercase mb-3 tracking-widest">SEO/SEO Visiva</p>
                    <p id="score-structure" class="text-4xl font-black font-outfit">--</p>
                </div>
                <div class="glass p-6 rounded-[2rem] score-card cursor-pointer border-b-8 border-red-500" onclick="showPillar('friction')">
                    <p class="text-[10px] font-black text-white/40 uppercase mb-3 tracking-widest">Attrito</p>
                    <p id="score-friction" class="text-4xl font-black font-outfit">--</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
                <!-- Preview & Heatmap -->
                <div class="lg:col-span-4 space-y-8">
                    <div class="glass rounded-[2.5rem] p-6 relative overflow-hidden">
                        <div class="flex justify-between items-center mb-4 px-2">
                            <span class="text-xs font-black uppercase text-white/40 tracking-widest">Eye-Tracking Simulato</span>
                            <i class="fas fa-bullseye text-purple-400"></i>
                        </div>
                        <div class="relative rounded-3xl overflow-hidden bg-black aspect-[4/5] flex items-center justify-center border border-white/5">
                            <img id="previewImg" class="w-full h-full object-cover">
                            <canvas id="heatmapCanvas" class="absolute inset-0 w-full h-full"></canvas>
                        </div>
                        <div class="mt-6 p-4 bg-white/5 rounded-2xl">
                            <p class="text-xs font-bold uppercase text-purple-400 mb-2">Legenda Calore</p>
                            <div class="flex items-center gap-2 text-xs text-white/60">
                                <span class="w-3 h-3 rounded-full bg-purple-500"></span> Focus Massimo
                                <span class="w-3 h-3 rounded-full bg-pink-500 opacity-50"></span> Focus Medio
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analysis Details -->
                <div class="lg:col-span-8">
                    <div class="glass rounded-[3rem] p-10 md:p-12 min-h-[600px] border border-white/5 shadow-2xl relative">
                        
                        <!-- Tab Content: Visual Flow -->
                        <div id="pillar-visual-flow" class="analysis-tab active">
                            <div class="flex justify-between items-start mb-8">
                                <div>
                                    <h3 class="text-pillar-title font-outfit">Analisi del Percorso Visivo</h3>
                                    <p class="text-purple-400 font-bold text-sm uppercase tracking-widest mt-1">Neuromarketing Level 01</p>
                                </div>
                            </div>
                            
                            <p class="text-analysis-main text-white/70 mb-8">
                                L'occhio umano non legge, "scansiona". Se il tuo contenuto non ha un ordine logico, l'utente proverà <strong>fatica cognitiva</strong> e abbandonerà il post.
                            </p>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <div class="bg-white/5 p-6 rounded-3xl">
                                    <p class="text-suggestion-label text-purple-400 uppercase mb-2">Il Verdetto</p>
                                    <p id="flow-verdict" class="text-suggestion-content font-bold"></p>
                                </div>
                                <div class="bg-white/5 p-6 rounded-3xl">
                                    <p class="text-suggestion-label text-white/40 uppercase mb-2">Efficacia "Stop-Scrolling"</p>
                                    <p id="flow-stop" class="text-suggestion-content font-bold"></p>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <h4 class="font-bold text-white/50 uppercase text-xs tracking-widest">Azioni per migliorare la vendita:</h4>
                                <div class="action-item flex gap-4 items-center">
                                    <i class="fas fa-arrow-right text-purple-400"></i>
                                    <p class="text-sm">Assicurati che l'elemento più grande sia la tua promessa principale (Hook).</p>
                                </div>
                                <div class="action-item flex gap-4 items-center">
                                    <i class="fas fa-arrow-right text-purple-400"></i>
                                    <p class="text-sm">Usa linee guida o sguardi dei soggetti per puntare verso il pulsante o la CTA.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Contrast -->
                        <div id="pillar-contrast" class="analysis-tab">
                            <h3 class="text-pillar-title mb-6 font-outfit">Contrasto e Psicologia del Colore</h3>
                            <p class="text-analysis-main text-white/70 mb-8">
                                I colori non servono solo per estetica: servono a separare il messaggio dallo sfondo. Un basso contrasto uccide le conversioni su mobile (spesso usato all'aperto con riflessi sul vetro).
                            </p>
                            
                            <div id="contrast-box" class="p-8 rounded-[2.5rem] mb-8 border-l-8">
                                <p class="text-suggestion-label uppercase mb-2">Analisi Cromatica</p>
                                <p id="contrast-detail" class="text-xl font-bold"></p>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                                <div class="p-5 bg-white/5 rounded-2xl">
                                    <p class="text-xs font-bold text-white/30 uppercase mb-1">Emozione Rilevata</p>
                                    <p id="color-emotion" class="font-bold text-pink-400">Professionale / Autorità</p>
                                </div>
                                <div class="p-5 bg-white/5 rounded-2xl">
                                    <p class="text-xs font-bold text-white/30 uppercase mb-1">Rapporto Luminosità</p>
                                    <p id="color-ratio" class="font-bold">Ottimale (WCAG AA)</p>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <h4 class="font-bold text-white/50 uppercase text-xs tracking-widest">Suggerimento Strategico:</h4>
                                <p class="text-sm italic text-white/60">"Usa un colore 'di rottura' (es. un arancione su blu) solo per ciò che deve essere cliccato o ricordato."</p>
                            </div>
                        </div>

                        <!-- Tab Content: Accessibility -->
                        <div id="pillar-accessibility" class="analysis-tab">
                            <h3 class="text-pillar-title mb-6 font-outfit">Accessibilità e User Experience</h3>
                            <p class="text-analysis-main text-white/70 mb-8">
                                Se un utente deve "pizzicare" lo schermo per leggere, hai già perso la vendita. La leggibilità è la base del successo SEO e Social.
                            </p>
                            
                            <div class="space-y-10">
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <p class="text-sm font-bold uppercase tracking-widest">Dimensione Font</p>
                                        <span id="font-status" class="px-3 py-1 bg-green-500/20 text-green-400 text-[10px] font-black rounded-full uppercase">Ottima</span>
                                    </div>
                                    <div class="h-3 w-full bg-white/5 rounded-full overflow-hidden">
                                        <div id="font-bar" class="h-full bg-blue-500 transition-all duration-1000"></div>
                                    </div>
                                    <p class="text-sm text-white/50 italic">Evita font con grazie (Serif) troppo sottili per testi lunghi su mobile.</p>
                                </div>

                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <p class="text-sm font-bold uppercase tracking-widest">Safe Zones (IG/TikTok)</p>
                                        <span id="safe-status" class="px-3 py-1 bg-red-500/20 text-red-400 text-[10px] font-black rounded-full uppercase">Rischio</span>
                                    </div>
                                    <div class="h-3 w-full bg-white/5 rounded-full overflow-hidden">
                                        <div id="safe-bar" class="h-full bg-blue-500 transition-all duration-1000"></div>
                                    </div>
                                    <p class="text-sm text-white/50 italic">Attenzione: i testi in basso potrebbero essere coperti dal nome utente o dalla descrizione del post.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Structure -->
                        <div id="pillar-structure" class="analysis-tab">
                            <h3 class="text-pillar-title mb-6 font-outfit">SEO Visiva e Categorizzazione AI</h3>
                            <p class="text-analysis-main text-white/70 mb-8">
                                Gli algoritmi (Google Vision, Instagram AI) leggono l'immagine per capire a chi mostrarla. Ecco come l'AI sta interpretando il tuo contenuto.
                            </p>
                            
                            <div class="bg-amber-500/10 p-8 rounded-[2.5rem] border border-amber-500/20 mb-8">
                                <p class="text-suggestion-label uppercase text-amber-500 mb-4 text-center">Tag Rilevati dall'Algoritmo</p>
                                <div id="structure-tags" class="flex flex-wrap justify-center gap-3"></div>
                            </div>

                            <div class="space-y-6">
                                <div class="p-6 bg-white/5 rounded-3xl">
                                    <h4 class="text-amber-400 font-bold mb-2">Consiglio per la SEO:</h4>
                                    <p class="text-sm leading-relaxed text-white/80">
                                        L'AI ha rilevato pattern associati a <span id="structure-intent" class="text-white font-bold italic">"Contenuto Educativo"</span>. Per scalare le ricerche, assicurati che le parole chiave principali siano presenti sia nell'immagine che nella caption.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Friction -->
                        <div id="pillar-friction" class="analysis-tab">
                            <h3 class="text-pillar-title mb-6 font-outfit">Attrito Cognitivo (Friction)</h3>
                            <p class="text-analysis-main text-white/70 mb-8">
                                L'attrito è il nemico del marketing. Più il contenuto è confuso, più il cervello dell'utente dice "no".
                            </p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                                <div class="text-center p-8 bg-red-500/10 rounded-[2.5rem] border border-red-500/20">
                                    <p class="text-[10px] font-black uppercase text-red-400 mb-2">Tempo di Reazione</p>
                                    <p id="friction-time-val" class="text-5xl font-black font-outfit text-white">--</p>
                                    <p class="text-xs mt-2 text-white/40 italic">Millisecondi per la comprensione</p>
                                </div>
                                <div class="flex flex-col justify-center">
                                    <p class="text-lg font-bold mb-2">Verdetto:</p>
                                    <p id="friction-verdict-txt" class="text-white/60 italic leading-relaxed"></p>
                                </div>
                            </div>

                            <div class="bg-white/5 p-6 rounded-3xl border border-white/10">
                                <h4 class="text-xs font-black uppercase text-white/40 mb-4 tracking-widest">Cosa semplificare subito:</h4>
                                <ul id="friction-actions" class="space-y-3 text-sm">
                                    <!-- Populated by JS -->
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
            <!-- Strategic Summary Footer -->
            <div class="glass rounded-[3xl] p-10 border-t-4 border-purple-500">
                <div class="flex flex-col md:flex-row gap-8 items-center">
                    <div class="w-24 h-24 rounded-full bg-purple-500/20 flex items-center justify-center text-4xl">
                        <i class="fas fa-rocket text-purple-400"></i>
                    </div>
                    <div>
                        <h4 class="text-2xl font-black font-outfit mb-2 uppercase">Sintesi Strategica per l'Azione</h4>
                        <p id="final-summary" class="text-lg text-white/60 leading-relaxed"></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const fileInput = document.getElementById('fileInput');
        const dropZone = document.getElementById('dropZone');
        const previewImg = document.getElementById('previewImg');
        let data = {};

        dropZone.onclick = () => fileInput.click();
        fileInput.onchange = (e) => handleFile(e.target.files[0]);
        dropZone.ondragover = (e) => { e.preventDefault(); dropZone.style.borderColor = "#8b5cf6"; };
        dropZone.ondrop = (e) => { e.preventDefault(); handleFile(e.dataTransfer.files[0]); };

        function handleFile(file) {
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImg.src = e.target.result;
                startAudit();
            };
            reader.readAsDataURL(file);
        }

        function startAudit() {
            document.getElementById('welcome').classList.add('hidden');
            document.getElementById('loader').classList.remove('hidden');
            
            setTimeout(() => {
                generateIntelligence();
                renderDashboard();
            }, 2000);
        }

        function generateIntelligence() {
            const r = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
            data = {
                scores: {
                    flow: r(65, 95),
                    contrast: r(70, 98),
                    access: r(55, 90),
                    structure: r(75, 99),
                    friction: r(30, 80)
                },
                hotpoints: Array.from({length: 12}, () => ({ x: Math.random(), y: Math.random(), v: Math.random() }))
            };
        }

        function renderDashboard() {
            document.getElementById('loader').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('navActions').style.display = 'flex';

            // Global Scores
            const updateScore = (id, val) => {
                document.getElementById(id).innerText = val + '%';
                document.getElementById(id).style.color = val > 80 ? '#4ade80' : (val > 60 ? '#fbbf24' : '#f87171');
            };
            
            updateScore('score-flow', data.scores.flow);
            updateScore('score-contrast', data.scores.contrast);
            updateScore('score-access', data.scores.access);
            updateScore('score-structure', data.scores.structure);
            updateScore('score-friction', data.scores.friction);

            // 01. Visual Flow
            document.getElementById('flow-verdict').innerText = data.scores.flow > 80 
                ? "ECCELLENTE: L'occhio viene guidato naturalmente verso la CTA." 
                : "MIGLIORABILE: Il percorso visivo è confuso, l'utente si perde tra troppi elementi.";
            document.getElementById('flow-stop').innerText = data.scores.flow > 75 ? "ALTA (Thumb-Stopper)" : "BASSA (Scroll-Through)";

            // 02. Contrast
            const cBox = document.getElementById('contrast-box');
            if(data.scores.contrast > 80) {
                cBox.className = "p-8 rounded-[2.5rem] mb-8 border-l-8 bg-green-500/10 border-green-500";
                document.getElementById('contrast-detail').innerText = "Impatto visivo potente. I testi bucano lo schermo.";
            } else {
                cBox.className = "p-8 rounded-[2.5rem] mb-8 border-l-8 bg-amber-500/10 border-amber-500";
                document.getElementById('contrast-detail').innerText = "Vibrazione cromatica debole. I testi rischiano di confondersi.";
            }

            // 03. Accessibility
            document.getElementById('font-bar').style.width = data.scores.access + '%';
            document.getElementById('safe-bar').style.width = (100 - data.scores.friction) + '%';
            document.getElementById('font-status').innerText = data.scores.access > 80 ? "Perfetto" : "Poco Leggibile";

            // 04. Structure
            const tags = ["Marketing Online", "Minimal Design", "Infografica", "High Engagement", "B2B"];
            document.getElementById('structure-tags').innerHTML = tags.map(t => `<span class="px-4 py-2 bg-white/5 rounded-full text-xs font-bold border border-white/10">#${t}</span>`).join('');

            // 05. Friction
            const frictionTime = (0.5 + (100 - data.scores.friction)/50).toFixed(2);
            document.getElementById('friction-time-val').innerText = frictionTime + "s";
            document.getElementById('friction-verdict-txt').innerText = data.scores.friction > 65 
                ? "L'utente comprende il messaggio istantaneamente. Massima efficacia per campagne di vendita rapida."
                : "Troppi distruttori. Il cervello dell'utente impiega troppo tempo a capire cosa stai offrendo.";
            
            const actions = data.scores.friction > 65 
                ? ["Mantenere la pulizia attuale", "Testare un copy più aggressivo"] 
                : ["Rimuovere loghi troppo grandi", "Limitare il testo a 3 righe", "Usare un solo font"];
            document.getElementById('friction-actions').innerHTML = actions.map(a => `<li class="flex items-center gap-2"><i class="fas fa-minus text-red-400"></i> ${a}</li>`).join('');

            // Final Summary
            document.getElementById('final-summary').innerText = `Il contenuto ha un potenziale di conversione del ${data.scores.flow}%. Per massimizzare i risultati, concentrati sulla riduzione dell'attrito e sulla SEO visiva. L'utente tipo decodifica questo asset in ${frictionTime} secondi: assicurati che in questo lasso di tempo la tua offerta sia chiara.`;

            drawHeatmap();
        }

        function showPillar(pillarId) {
            document.querySelectorAll('.analysis-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(`pillar-${pillarId}`).classList.add('active');
            document.querySelectorAll('.score-card').forEach(c => c.classList.remove('bg-white/10'));
            event.currentTarget.classList.add('bg-white/10');
        }

        function drawHeatmap() {
            const canvas = document.getElementById('heatmapCanvas');
            const ctx = canvas.getContext('2d');
            const img = document.getElementById('previewImg');
            
            canvas.width = img.clientWidth;
            canvas.height = img.clientHeight;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            data.hotpoints.forEach(p => {
                const x = p.x * canvas.width;
                const y = p.y * canvas.height;
                const radius = 140 * p.v;
                const grad = ctx.createRadialGradient(x, y, 0, x, y, radius);
                grad.addColorStop(0, 'rgba(139, 92, 246, 0.5)');
                grad.addColorStop(0.5, 'rgba(236, 72, 153, 0.1)');
                grad.addColorStop(1, 'rgba(0, 0, 0, 0)');
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        window.onresize = () => { if(data.hotpoints) drawHeatmap(); };
    </script>
</body>
</html>
